# 架构设计

> **返回**：[主文档](../README.md) | **上一篇**：[核心概念](./01-核心概念.md) | **下一篇**：[实施指南](./03-实施指南.md)

---

## 🏗️ 四层架构模型

```
┌─────────────────────────────────────────┐
│         1. 规范层 (Specification)        │
│    定义"是什么"和"怎么做"                 │
│    例如：标签规范、分类指南               │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│         2. 工作流层 (Workflow)           │
│    定义"做什么"和"做到哪"                 │
│    例如：路书系统、任务管理               │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│         3. 索引层 (Index)                │
│    定义"在哪里"和"有什么"                 │
│    例如：总览文档、报告索引               │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│         4. 执行层 (Execution)            │
│    定义"当前状态"和"下一步"               │
│    例如：当前任务路书                     │
└─────────────────────────────────────────┘
```

---

## 📂 目录结构设计

### 推荐结构

```
AI指导目录/
├── 核心规范/                    # 规范层
│   ├── 📖 总览手册.md           # 入口文档
│   ├── 🗺️ 结构索引.md          # 知识库结构
│   ├── 📋 分类指南.md           # 分类规则
│   ├── 🏷️ 标签规范.md          # 标签体系
│   └── 🔗 双链规范.md           # 关联规则
│
├── 路书系统/                    # 工作流层
│   ├── 📋 路书索引.md           # 路书总览
│   ├── 🎯 当前任务路书.md       # 当前任务
│   ├── 活跃任务/                # 任务详情
│   │   ├── 任务A.md
│   │   └── 任务B.md
│   └── 任务历史/                # 已完成任务
│       └── 2025-10/
│           └── 任务X-已完成.md
│
└── 进度报告/                    # 索引层 + 执行层
    ├── 📋 报告索引.md           # 报告总览
    ├── 体系建设/                # 分类报告
    ├── 写作项目/
    ├── 技术处理/
    └── ...
```

### DDAC开源项目结构

```
DDAC/
├── README.md                          # 精简版主文档
├── LICENSE                            # CC BY-SA 4.0协议
├── CHANGELOG.md                       # 版本变更历史
├── .gitignore                         # Git忽略规则
│
├── docs/                              # 详细文档目录
│   ├── 01-核心概念.md                 # 什么是DDAC
│   ├── 02-架构设计.md                 # 四层架构详解
│   ├── 03-实施指南.md                 # 从零到一实践
│   ├── 04-进阶技巧.md                 # 高级用法
│   ├── 05-常见问题.md                 # FAQ
│   └── assets/                        # 文档资源（图片等）
│
├── templates/                         # 模板文件目录
│   ├── README.md                      # 模板使用总览
│   ├── core-specs/                    # 核心规范模板
│   │   ├── ai-collaboration-guide.md  # AI协作指导手册
│   │   ├── knowledge-structure.md     # 知识库结构索引
│   │   ├── classification-guide.md    # 文件分类指南
│   │   ├── tag-system.md              # 标签体系规范
│   │   └── backlink-spec.md           # 双链建立规范
│   ├── workflow/                      # 工作流模板
│   │   ├── roadmap-index.md           # 路书索引
│   │   ├── current-tasks.md           # 当前任务路书
│   │   └── task-template.md           # 任务模板
│   └── reports/                       # 报告模板
│       ├── report-index.md            # 报告索引
│       └── completion-report.md       # 完成报告模板
```

隐私与开源范围说明：上述项目结构示例中，`.internal`目录展示已移除，以避免暴露私有实现。

---

## 🎨 设计原则

### 原则1：单一职责

每个文档只负责一个方面，避免职责混乱。

```yaml
✅ 好的设计：
- 标签规范.md：只定义标签体系
- 分类指南.md：只定义分类规则
- 当前任务路书.md：只记录当前任务

❌ 坏的设计：
- 超级文档.md：包含所有规范、任务、报告
```

### 原则2：分层清晰

规范 → 工作流 → 索引 → 执行，层次分明。

### 原则3：轻量高效

每个文档控制在 200 行以内，便于AI快速读取。

### 原则4：自我描述

文档本身就是最好的说明，无需额外解释。

---

## 🔄 工作流系统

### 三层路书结构

```yaml
第一层 - 路书索引（📋 路书索引.md）:
  职责: 总览所有任务
  内容:
    - 活跃任务列表（≤5个）
    - 历史任务索引
    - 任务统计数据
    - 使用指南
  大小: <160行

第二层 - 当前任务路书（🎯 当前任务路书.md）:
  职责: 聚焦当前工作
  内容:
    - 当前任务概览
    - 下一步行动
    - 最近进展
    - 快速链接
  大小: <150行

第三层 - 任务详情（活跃任务/*.md）:
  职责: 完整任务信息
  内容:
    - 任务目标
    - 详细计划
    - 执行记录
    - 问题与解决
  大小: <300行
```

### 任务生命周期

```
创建任务 → 活跃任务 → 执行中 → 完成 → 归档历史
   ↓          ↓         ↓        ↓       ↓
路书索引   当前路书   进度更新  生成报告  历史目录
```

---

## 📊 进度报告系统

### 报告分类

```yaml
报告类型：
  1. 阶段完成报告:
    - 记录阶段性成果
    - 统计数据分析
    - 问题与改进
  
  2. 任务完成报告:
    - 完整任务总结
    - 工作亮点
    - 经验教训
  
  3. 周期性总结报告:
    - 定期回顾
    - 趋势分析
    - 优化建议
```

### 报告目录结构

```
进度报告/
├── 📋 报告索引.md
├── 体系建设/
│   ├── 路书系统重构完成报告.md
│   └── AI指导目录建立完成报告.md
├── 写作项目/
├── 技术处理/
└── ...
```

---

## 🔗 相关文档

- **上一篇**：[核心概念](./01-核心概念.md) - 理解DDAC是什么
- **下一篇**：[实施指南](./03-实施指南.md) - 开始搭建你的体系
- **进阶技巧**：[高级用法](./04-进阶技巧.md) - 提升协作效率
- **常见问题**：[FAQ](./05-常见问题.md) - 解答疑惑

---

**上一篇**：[核心概念](./01-核心概念.md) | **下一篇**：[实施指南](./03-实施指南.md)