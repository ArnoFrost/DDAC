---
title: 批量添加YAML头部
created: 2025-10-21
updated: 2025-10-21
tags: [元Prompt, 文档处理, YAML, 批量操作]
version: 1.0.0
category: 文档处理
difficulty: 简单
estimated_time: 10-20分钟
---

# 📋 批量添加YAML头部

> **适用场景**：为多个Markdown文件批量添加规范的YAML Front Matter头部

---

## 🎯 使用场景

### 适合你，如果：
- ✅ 有大量Markdown文件缺少YAML头部
- ✅ 需要统一文档元数据格式
- ✅ 想要提升文档的可检索性
- ✅ 准备建立标签体系

### 不适合，如果：
- ❌ 文件数量很少（<5个），手动添加更快
- ❌ 文件格式不是Markdown
- ❌ 还没有确定YAML字段规范

---

## 📝 Prompt模板

### 基础版（推荐新手）

```markdown
参考 .internal/ai-guide 和 docs/03-实施指南.md：

我需要为以下目录的Markdown文件批量添加YAML头部：
- 目录路径：[填写目录路径]
- 文件数量：约[N]个
- 文件主题：[描述主题，如"Python学习笔记"/"项目文档"]

请：
1. 扫描目录，列出所有.md文件
2. 分析文件内容，提取关键信息
3. 为每个文件生成YAML头部（包含title/created/updated/tags）
4. 逐个确认后添加
5. 生成操作报告

注意：
- 如果文件已有YAML头部，跳过或询问是否更新
- tags建议3-5个，遵循标签规范
- 保留文件原有内容不变
```

### 进阶版（自定义字段）

```markdown
参考 .internal/ai-guide 和 docs/03-实施指南.md：

批量添加YAML头部任务：
- 目录：[路径]
- 文件数：约[N]个
- 主题：[主题]

YAML字段要求：
- 必需字段：title, created, updated, tags
- 可选字段：[如author, status, priority等]
- 特殊要求：[如特定标签格式、日期格式等]

执行策略：
- [ ] 先分析5个样本文件，确认字段提取逻辑
- [ ] 生成预览，等待确认
- [ ] 批量执行
- [ ] 生成详细报告（成功/失败/跳过统计）

请开始执行。
```

### 专家版（复杂场景）

```markdown
参考 .internal/ai-guide 和 docs/03-实施指南.md：

复杂YAML批量添加任务：

目标目录：
- 主目录：[路径]
- 子目录：[是否递归，排除哪些目录]
- 文件过滤：[如只处理特定前缀/后缀的文件]

YAML规范：
```yaml
title: [从文件名或首行标题提取]
created: [从文件创建时间获取，格式YYYY-MM-DD]
updated: [从文件修改时间获取]
tags: [根据文件路径和内容智能生成3-5个]
author: [可选，从文件内容提取或使用默认值]
status: [可选，如draft/published/archived]
```

特殊处理：
- 如果文件已有YAML：[覆盖/合并/跳过]
- 如果无法提取title：[使用文件名/询问用户]
- 标签生成策略：[基于路径/基于内容/基于关键词]

质量检查：
- [ ] 检查YAML格式正确性
- [ ] 检查必需字段完整性
- [ ] 检查标签规范性（中文、名词、3-5个）
- [ ] 检查日期格式统一性

请：
1. 制定详细执行计划
2. 分批处理（每批10个文件）
3. 每批完成后汇报进度
4. 最终生成完整报告
```

---

## 🎓 使用指南

### 第一步：准备工作

1. **确定目标目录**
   - 选择要处理的文件目录
   - 确认文件数量和类型
   - 备份重要文件（可选但推荐）

2. **确定YAML规范**
   - 参考 `docs/03-实施指南.md` 中的YAML规范
   - 确定必需字段和可选字段
   - 确定标签命名规范

3. **选择合适的Prompt版本**
   - 新手：使用基础版
   - 有经验：使用进阶版
   - 复杂场景：使用专家版

### 第二步：执行任务

1. **复制Prompt模板**
   - 选择合适的版本
   - 填写具体信息（目录路径、文件数量等）

2. **发送给AI**
   - 粘贴到AI对话框
   - 等待AI分析和确认

3. **确认执行计划**
   - 检查AI生成的执行计划
   - 确认YAML字段提取逻辑
   - 同意后开始执行

### 第三步：质量检查

1. **检查样本文件**
   - 随机抽查3-5个文件
   - 检查YAML格式是否正确
   - 检查字段内容是否合理

2. **检查统计报告**
   - 确认成功/失败/跳过数量
   - 查看失败原因
   - 决定是否需要补充处理

3. **验证可用性**
   - 在Obsidian中打开文件
   - 检查YAML是否被正确识别
   - 测试标签搜索功能

---

## 💡 最佳实践

### ✅ 推荐做法

1. **先小范围测试**
   - 选择5-10个文件先测试
   - 确认效果后再批量处理
   - 避免一次性处理过多文件

2. **备份原文件**
   - 使用Git版本控制
   - 或手动复制备份
   - 确保可以回滚

3. **分批处理**
   - 每批10-20个文件
   - 每批完成后检查质量
   - 发现问题及时调整

4. **标签规范化**
   - 使用中文标签
   - 使用名词而非动词
   - 控制在3-5个
   - 参考已有标签体系

### ❌ 避免做法

1. **不要一次性处理所有文件**
   - 容易出错且难以回滚
   - 建议分批处理

2. **不要忽略已有YAML**
   - 可能覆盖重要信息
   - 应该先检查再决定

3. **不要使用过于复杂的标签**
   - 避免长标签（>5个字）
   - 避免过于具体的标签
   - 避免重复标签

---

## 📊 效果评估

### 成功标准

- ✅ 所有文件都有规范的YAML头部
- ✅ 必需字段（title/created/updated/tags）完整
- ✅ 标签符合规范（中文、名词、3-5个）
- ✅ 日期格式统一（YYYY-MM-DD）
- ✅ 在Obsidian中正常显示和搜索

### 常见问题

**Q: AI无法提取合适的title怎么办？**
A: 可以让AI使用文件名作为title，或者手动指定规则（如使用首行标题）。

**Q: 如何处理已有YAML的文件？**
A: 建议先跳过，单独处理。或者让AI合并新旧YAML，保留原有重要字段。

**Q: 标签生成不准确怎么办？**
A: 可以先让AI生成，然后手动调整。或者提供标签词库让AI参考。

**Q: 批量操作后发现问题如何回滚？**
A: 如果使用Git，可以直接回滚。否则需要从备份恢复。

---

## 🔗 相关资源

### 相关文档
- [实施指南 - YAML规范](../../docs/03-实施指南.md#yaml头部规范)
- [实施指南 - 标签体系](../../docs/03-实施指南.md#标签体系设计)
- [设计标签体系](../规范建立/02-设计标签体系.md)

### 相关模板
- [批量添加标签](./02-批量添加标签.md)
- [建立双链网络](./03-建立双链网络.md)
- [文档质量检查](../质量检查/01-文档质量检查.md)

### 下一步
- 完成YAML添加后，可以继续[批量添加标签](./02-批量添加标签.md)
- 或者开始[建立双链网络](./03-建立双链网络.md)

---

## 📝 示例

### 示例1：技术笔记目录

**输入Prompt**：
```markdown
参考 .internal/ai-guide：

批量添加YAML头部：
- 目录：技术笔记/Python/
- 文件数：约15个
- 主题：Python学习笔记

请按基础版执行。
```

**预期输出**：
```yaml
---
title: Python基础语法
created: 2024-01-15
updated: 2025-10-21
tags: [Python, 编程语言, 基础语法, 学习笔记]
---
```

### 示例2：项目文档目录

**输入Prompt**：
```markdown
参考 .internal/ai-guide：

批量添加YAML头部：
- 目录：项目文档/DDAC/
- 文件数：约8个
- 主题：DDAC项目文档

YAML字段：
- 必需：title, created, updated, tags, status
- status可选值：draft/published/archived

请按进阶版执行。
```

**预期输出**：
```yaml
---
title: DDAC核心概念
created: 2025-10-18
updated: 2025-10-21
tags: [DDAC, 方法论, 核心概念, 文档]
status: published
---
```

---

**维护者**：DDAC社区  
**最后更新**：2025-10-21  
**模板版本**：v1.0.0
